<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>enchant</title>
    <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <script type="text/javascript" src="components/enchant.js"></script>
    <script type="text/javascript" src="components/gu.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <style type="text/css">
        body{margin: 0;}
    </style>
    <script>
        enchant();
        window.onload = function() {
            
            //■■■■■■■■■■■■■■■■■■■■
            //Coreシーン
            //■■■■■■■■■■■■■■■■■■■■
            core = new Core(768, 1024);
            core.fps = 25;
            core.preload('01_migitt.png','02_hidarite.png','haikei.png','burger.png','kao.png','damage3.mp3','swing1.mp3','famipop4.mp3','main.png');
            core.onload = function() {
            
            //core.assets['famipop4.mp3'].play();
            //core.assets['famipop4.mp3'].src.loop = true;

                                
                var haikei = new Sprite(768, 1024);
                haikei.image = core.assets['haikei.png'];
                haikei.x = 0;
                haikei.y = 0;
                haikei.scale(1, 1);
                core.rootScene.addChild(haikei);
                
                var hidarite = new Sprite(306, 996);
                hidarite.image = core.assets['02_hidarite.png'];
                hidarite.x = 470;
                hidarite.y = 463;
                hidarite.scale(0.5, 0.5);
                core.rootScene.addChild(hidarite);
                
                var burger = new Sprite(56, 276);
                burger.fps = 5;
                burger.frame = Math.floor(Math.random()*5+1);
                burger.image = core.assets['burger.png'];
                burger.x = Math.random()*(768-burger.width);
                burger.y = 0;
                burger.scale(0.8, 0.8);
                core.rootScene.addChild(burger);
                
                /*----------------------------------
                ここから具
                ----------------------------------*/
                    var gu1 = new Sprite(56, 276);
                    gu1.fps = 5;
                    gu1.frame = Math.floor(Math.random()*6);
                    gu1.image = core.assets['burger.png'];
                    gu1.x = Math.random()*(768-burger.width);
                    gu1.y = -500*1;
                    gu1.scale(0.8, 0.8);
                    core.rootScene.addChild(gu1);
                    
                    var gu2 = new Sprite(56, 276);
                    gu2.fps = 5;
                    gu2.frame = Math.floor(Math.random()*6);
                    gu2.image = core.assets['burger.png'];
                    gu2.x = Math.random()*(768-burger.width);
                    gu2.y = -500*2;
                    gu2.scale(0.8, 0.8);
                    core.rootScene.addChild(gu2);
                    
                    var gu3 = new Sprite(56, 276);
                    gu3.fps = 5;
                    gu3.frame = Math.floor(Math.random()*6);
                    gu3.image = core.assets['burger.png'];
                    gu3.x = Math.random()*(768-burger.width);
                    gu3.y = -500*3;
                    gu3.scale(0.8, 0.8);
                    core.rootScene.addChild(gu3);
                    
                    var gu4 = new Sprite(56, 276);
                    gu4.fps = 5;
                    gu4.frame = Math.floor(Math.random()*6);
                    gu4.image = core.assets['burger.png'];
                    gu4.x = Math.random()*(768-burger.width);
                    gu4.y = -500*4;
                    gu4.scale(0.8, 0.8);
                    core.rootScene.addChild(gu4);
                    
                    var gu5 = new Sprite(56, 276);
                    gu5.fps = 5;
                    gu5.frame = Math.floor(Math.random()*6);
                    gu5.image = core.assets['burger.png'];
                    gu5.x = Math.random()*(768-burger.width);
                    gu5.y = -500*5;
                    gu5.scale(0.8, 0.8);
                    core.rootScene.addChild(gu5);
                    
                    var gu6 = new Sprite(56, 276);
                    gu6.fps = 5;
                    gu6.frame = Math.floor(Math.random()*6);
                    gu6.image = core.assets['burger.png'];
                    gu6.x = Math.random()*(768-burger.width);
                    gu6.y = -500*6;
                    gu6.scale(0.8, 0.8);
                    core.rootScene.addChild(gu6);
                    
                    var gu7 = new Sprite(56, 276);
                    gu7.fps = 5;
                    gu7.frame = Math.floor(Math.random()*6);
                    gu7.image = core.assets['burger.png'];
                    gu7.x = Math.random()*(768-burger.width);
                    gu7.y = -500*7;
                    gu7.scale(0.8, 0.8);
                    core.rootScene.addChild(gu7);
                    
                    var gu8 = new Sprite(56, 276);
                    gu8.fps = 5;
                    gu8.frame = Math.floor(Math.random()*6);
                    gu8.image = core.assets['burger.png'];
                    gu8.x = Math.random()*(768-burger.width);
                    gu8.y = -500*8;
                    gu8.scale(0.8, 0.8);
                    core.rootScene.addChild(gu8);
                    
                    var gu9 = new Sprite(56, 276);
                    gu9.fps = 5;
                    gu9.frame = Math.floor(Math.random()*6);
                    gu9.image = core.assets['burger.png'];
                    gu9.x = Math.random()*(768-burger.width);
                    gu9.y = -500*9;
                    gu9.scale(0.8, 0.8);
                    core.rootScene.addChild(gu9);
                    
                    var gu10 = new Sprite(56, 276);
                    gu10.fps = 5;
                    gu10.frame = Math.floor(Math.random()*6);
                    gu10.image = core.assets['burger.png'];
                    gu10.x = Math.random()*(768-burger.width);
                    gu10.y = -500*10;
                    gu10.scale(0.8, 0.8);
                    core.rootScene.addChild(gu10);
                    
                /*----------------------------------
                ここまで具
                ----------------------------------*/
                var migitt = new Sprite(306, 996);
                migitt.image = core.assets['01_migitt.png'];
                migitt.x = - 50;
                migitt.y = 463;
                migitt.scale(0.5, 0.5);
                core.rootScene.addChild(migitt);
                
                var kao = new Sprite(752, 283);
                kao.image = core.assets['kao.png'];
                kao.x = 0;
                kao.y = 880;
                kao.scale(1, 1);
                kao.gu_flg = 1;
                kao.tick = 0;
                core.rootScene.addChild(kao);
                
                var infoLabel = new Label(kao.gu_flg);
                infoLabel.x = 0;
                infoLabel.y = 0;
                infoLabel.font = '100px sens-serif';
                core.rootScene.addChild(infoLabel);
                
                
                kao.addEventListener('touchstart',function(e) {
                        core.assets['swing1.mp3'].play();
                })

                kao.addEventListener('touchmove',function(e) {
                        this.x = e.x - this.width /2;
                        hidarite.x =  this.x + 100 + this.width /2;
                        migitt.x =  this.x + 290 - this.width /2;
                })
                
                kao.addEventListener('touchend',function(e) {
                        hidarite.x =  this.x - 90 + this.width /2;
                        migitt.x =  this.x  - 210 + this.width /2;
                        core.assets['damage3.mp3'].play();
                })
                
                
                kao.addEventListener('enterframe',function(e) {
                        burger.y += 10;
                        infoLabel.text = kao.tick;
                        kao.tick += 1;
                        
                        if(kao.tick % 120 == 0) {
                            
                        }
                    
                       if (gu1){
                            gu1.y += 10;
                       }
                       if (gu2){
                            gu2.y += 10;
                       }
                       if (gu3){
                            gu3.y += 10;
                       }
                       if (gu4){
                            gu4.y += 10;
                       }
                       if (gu5){
                            gu5.y += 10;
                       }
                       if (gu6){
                            gu6.y += 10;
                       }
                       if (gu7){
                            gu7.y += 10;
                       }
                       if (gu8){
                            gu8.y += 10;
                       }
                       if (gu9){
                            gu9.y += 10;
                       }
                       if (gu10){
                            gu10.y += 10;
                       }
                })
                
                
                
                
                 // 二つ目のシーン
                var main = new Scene();
                
                var main = new Sprite(798, 1049);
                main.image = core.assets['main.png'];
                main.x = 0;
                main.y = 0;
                main.scale(1, 1);
                //core.rootScene.addChild(main);
                core.pushScene(main);
                
        
        
                // 画面をクリック(タッチ)した時の処理
                kao.addEventListener('touchstart', function() {
                    core.pushScene(main);
                });
            }
            core.start();
            
        }
    </script>
</head>
<body>
    <br>
    This is a template for Monaca app.<br>
</body>
</html>
